{# Menu widgets #}
{%  set widgets = menu.widgets %}
{# Menu widgets instances #}
{% set widgetSearch, widgetTitle = null, null %}
{# Menu widgets definitions #}
{%  if widgets %}
    {% for widget in widgets %}
        {# Menu widget "Form search" #}
        {% if widget.type == 'form-search' %}
            {% set widgetSearch = widget %}
        {% endif %}
        {# Menu widget "Link title" #}
        {% if widget.type == 'menu-title' %}
            {% set widgetTitle = widget %}
        {% endif %}
    {% endfor %}
{% endif %}
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            {% if widgetTitle is defined %}
                <!-- Menu widget "Link title" -->
                 <a class="navbar-brand" href="#">{{ widgetTitle.value }}</a>
            {% endif %}

        </div>
        <div id="navbar" class="navbar-collapse collapse">
            {% if menu.links %}
                <!-- Menu links -->
                <ul class="nav navbar-nav navbar-right">
                    {% for link in menu.links %}
                    <li>
                        {% if link.page is not null %}
                            <a href="/page/{{ link.page.id }}">{{ link.page.name }}</a>
                        {% elseif link.category is not null %}
                            <a href="/category/{{ link.category.id }}">{{ link.category.title }}</a>
                        {% else %}
                            <a href="{{ link.target }}">{{ link.text }}</a>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            {% endif %}

            {% if widgetSearch is defined %}
                <!-- Menu widget "Form search" -->
                <form class="navbar-form navbar-right">
                    <input type="text" class="form-control" placeholder="{{ widgetSearch.value }}">
                </form>
            {% endif %}
        </div>
    </div>
</nav>